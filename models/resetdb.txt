use cs332;

drop table if exists comments;
drop table if exists posts;
drop table if exists users;
drop table if exists avatars;

create table avatars(
	ID INT AUTO_INCREMENT PRIMARY KEY,
	url TEXT NOT NULL
);

create table users (
	username VARCHAR(64) NOT NULL PRIMARY KEY,
	password VARCHAR(64) NOT NULL,
	admin BOOL,
	avatar_ID INT
);

alter table users add FOREIGN KEY(avatar_ID) references avatars(ID);

create table posts (
	post_ID INT AUTO_INCREMENT PRIMARY KEY,
	username VARCHAR(64) NOT NULL,
	post TEXT NOT NULL,
	title TEXT NOT NULL,
	upvote INT,
	downvote INT
);

alter table posts add FOREIGN KEY(username_ID) references users(username);

create table comments(
	comment_ID INT AUTO_INCREMENT PRIMARY KEY,
	username VARCHAR(64) NOT NULL,
	post_ID INT NOT NULL,
	comment TEXT NOT NULL
);

alter table comments add FOREIGN KEY(username_ID) references users(username);
alter table comments add FOREIGN KEY(post_ID) references posts(post_ID);






